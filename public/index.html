<!DOCTYPE html>
<html>
<head>
  <title>Island Queue</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body { font-family: Arial; background:#1e1e2f; color:white; text-align:center; }
    .panel { background:#2c2c3e; padding:20px; margin:15px auto; width:400px; border-radius:10px; }
    input { padding:8px; margin:5px; width:80%; }
    button { padding:8px 15px; cursor:pointer; }
  </style>
</head>
<body>

<h1>ðŸŒ´ Island Queue</h1>

<div class="panel">
  <h2>Island Status</h2>
  <p>Dodo Code: <span id="dodo">-----</span></p>
  <p>Island Pass: <span id="pass">----</span></p>
  <p>Turnip Price: <span id="turnip">0</span></p>
  <p>Local Time: <span id="time">--</span></p>
</div>

<div class="panel">
  <h2>Join Queue</h2>
  <input id="username" placeholder="Your Name"><br>
  <input id="island" placeholder="Your Island"><br>
  <button onclick="join()">Join</button>
</div>

<div class="panel">
  <h2>Queue</h2>
  <div id="queueList"></div>
</div>

<script>
const socket = io();

function join(){
  socket.emit("joinQueue", {
    username: document.getElementById("username").value,
    island: document.getElementById("island").value
  });
}

socket.on("queueUpdate", data => {

  document.getElementById("turnip").innerText = data.islandData.turnipPrice;
  document.getElementById("pass").innerText = data.islandData.islandPass;
  document.getElementById("time").innerText = data.islandData.localTime;

  const list = document.getElementById("queueList");
  list.innerHTML = "";

  data.users.forEach(user => {
    const div = document.createElement("div");
    div.innerHTML =
      `#${user.position} ${user.username} (${user.island}) - ` +
      (user.active ? "ACTIVE - Dodo: " + data.islandData.dodoCode : "Waiting...");
    list.appendChild(div);
  });

});
</script>

</body>
</html>