<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ðŸŒ´ Daijoubu Island Admin Panel ðŸŒ´</title>
<link href="https://fonts.googleapis.com/css2?family=Linotte:wght@600&display=swap" rel="stylesheet">
<style>
body{font-family:'Linotte',sans-serif;text-align:center;background:#f0f8ff;padding:30px;}
.card{background: rgba(255,255,255,0.9);width:90%; max-width:800px;margin:30px auto;padding:20px;border-radius:20px;box-shadow:0 8px 20px rgba(0,0,0,0.2);}
input, button{padding:10px;margin:5px;border-radius:8px;width:80%;}
button{cursor:pointer;font-weight:bold;background:#ffb6b9;border:none;transition:0.2s;}
button:hover{background:#ff8b94;}
.toast{position:fixed;top:20px;right:20px;background:#4CAF50;color:#fff;padding:12px 20px;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.3);z-index:10000;animation:fadeinout 3s forwards;}
@keyframes fadeinout{0%{opacity:0; transform:translateY(-20px);}10%{opacity:1; transform:translateY(0);}90%{opacity:1;}100%{opacity:0; transform:translateY(-20px);}}
</style>
</head>
<body>

<div class="card">
<h2>ðŸŒ´ Control Panel</h2>

<div id="loginDiv">
  <input id="adminPasswordInput" placeholder="Enter Admin Password" type="password"><br>
  <button onclick="adminLogin()">Login</button>
</div>

<div id="controlPanel" style="display:none;">
  <h3>Manage Island</h3>
  <input id="dodoInput" placeholder="Enter new Dodo Code">
  <button onclick="updateDodo()">Update Dodo Code</button><br>
  <input id="islandPasswordInput" placeholder="Set Island Password">
  <button onclick="updateIslandPassword()">Update Island Password</button><br>
  <input id="turnipInput" placeholder="Enter Turnip Price">
  <button onclick="updateTurnipPrice()">Update Turnip Price</button><br>
</div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
let adminPassword = "";

function showToast(msg){
    const toast = document.createElement("div");
    toast.className="toast"; toast.innerText = msg;
    document.body.appendChild(toast);
    setTimeout(()=>toast.remove(),3000);
}

function adminLogin(){
    const pw = document.getElementById("adminPasswordInput").value.trim();
    if(!pw){alert("Enter password"); return;}
    adminPassword = pw;
    document.getElementById("loginDiv").style.display="none";
    document.getElementById("controlPanel").style.display="block";
    showToast("âœ… Logged in as Admin");
}

function updateDodo(){
    const code = document.getElementById("dodoInput").value.trim();
    if(code){
        socket.emit("updateDodoCode", code, adminPassword);
        showToast("âœ… Dodo code updated");
    }
}

function updateIslandPassword(){
    const pass = document.getElementById("islandPasswordInput").value.trim();
    if(pass){
        socket.emit("updateIslandPassword", pass, adminPassword);
        showToast("âœ… Island password updated");
    }
}

function updateTurnipPrice(){
    const price = parseInt(document.getElementById("turnipInput").value.trim());
    if(price && !isNaN(price)){
        socket.emit("updateTurnipPrice", price, adminPassword);
        showToast("âœ… Turnip price updated");
    }
}
</script>
</body>
</html>