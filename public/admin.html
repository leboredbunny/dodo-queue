<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel ðŸŒ´</title>
<link href="https://fonts.googleapis.com/css2?family=Linotte:wght@600&display=swap" rel="stylesheet">
<style>
body{font-family:'Linotte',sans-serif;text-align:center;background:#f0f8ff;padding:30px;}
.card{background: rgba(255,255,255,0.9); width:360px; margin:50px auto; padding:20px; border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,0.2);}
input, button {padding:10px;margin:5px;border-radius:8px;width:80%;}
button{cursor:pointer;font-weight:bold;background:#ffb6b9;border:none;}
button:hover{background:#ff8b94;}
table{margin:auto;width:95%;border-collapse:collapse;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
</style>
</head>
<body>

<div class="card">
<h2>ðŸŒ´ Admin Panel</h2>

<!-- Dodo Code -->
<input id="dodoInput" placeholder="Enter new Dodo Code">
<button onclick="updateDodo()">Update Dodo Code</button><br>

<!-- Island Password -->
<input id="islandPasswordInput" placeholder="Set Island Password">
<button onclick="updateIslandPassword()">Update Island Password</button><br>

<p>Current visitors: <span id="visitorCount">0</span>/7</p>

<!-- Visitor details table -->
<h3>Visitor Details</h3>
<table>
<thead>
<tr><th>Player Name</th><th>Island Name</th><th>Password</th><th>Position</th><th>Active</th></tr>
</thead>
<tbody id="visitorTable"></tbody>
</table>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
let islandPassword = "daijoubu"; // default

// Live queue updates
socket.on("queueUpdate", data=>{
    document.getElementById("visitorCount").innerText = data.activeCount;
    const tbody = document.getElementById("visitorTable");
    tbody.innerHTML = "";
    data.users.forEach(u=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${u.username}</td><td>${u.visitorIsland}</td><td>${u.visitorPassword}</td><td>${u.position}</td><td>${u.active}</td>`;
        tbody.appendChild(tr);
    });
});

// Update Dodo Code
function updateDodo(){
    const code = document.getElementById("dodoInput").value.trim();
    if(code) socket.emit("updateDodo",code);
}

// Update Island Password
function updateIslandPassword(){
    const newPass = document.getElementById("islandPasswordInput").value.trim();
    if(newPass){
        islandPassword = newPass;
        socket.emit("updateIslandPassword", newPass);
        alert("Island password updated!");
    }
}
</script>
</body>
</html>