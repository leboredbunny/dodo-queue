<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ðŸ«§Private Island QueueðŸ«§</title>
<link href="https://fonts.googleapis.com/css2?family=Linotte:wght@600&display=swap" rel="stylesheet">
<style>
*{font-family:'Linotte',sans-serif;margin:0;padding:0;box-sizing:border-box;}
body{background:url('bg.jpg') no-repeat center center fixed;background-size:cover;text-align:center;}

.card{
background:rgba(255,255,255,0.92);
width:360px;
margin:20px auto;
padding:25px;
border-radius:25px;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

input{padding:10px;margin:8px 0;border-radius:10px;border:1px solid #ccc;width:85%;}
button{background:#ffb6b9;border:none;padding:10px 18px;border-radius:12px;cursor:pointer;}
button:hover{background:#ff8b94;}

.progress-container{background:#ddd;border-radius:20px;height:20px;overflow:hidden;margin-top:10px;}
.progress-bar{height:100%;width:0%;background:green;transition:0.3s;}

footer{
width:100%;
background:#ffd700;
padding:12px 0;
display:flex;
justify-content:center;
gap:20px;
position:fixed;
bottom:0;
}
footer img{width:24px;height:24px;}
</style>
</head>
<body>

<h1>ðŸ«§Private Island QueueðŸ«§</h1>

<div class="card" id="login">
<h2>Join Island Queue</h2>
<input id="username" placeholder="Player Name"><br>
<input id="visitorIsland" placeholder="Island Name"><br>
<input id="visitorPassword" placeholder="Island Pass" type="password"><br>
<button onclick="login()">Join</button>
<p id="visitorCountDisplay">Visitors: 0/7</p>
</div>

<div class="card" id="queue" style="display:none;">
<h2 id="status"></h2>
<p id="position"></p>
<div class="progress-container">
<div id="progressBar" class="progress-bar"></div>
</div>
<p id="progressText">0/7 Visitors</p>
<h3 id="code"></h3>
<button onclick="leaveIsland()">Leave Island</button>
</div>

<footer>
<a href="https://www.youtube.com/@daijoubuxix" target="_blank"><img src="youtube.png">YouTube</a>
<a href="https://www.twitch.tv/daijoubuxix" target="_blank"><img src="twitch.png">Twitch</a>
<a href="https://www.facebook.com/daijoubuacnh" target="_blank"><img src="facebook.png">Follow</a>
</footer>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
let userId = crypto.randomUUID();

function login(){
const username=document.getElementById("username").value.trim();
const visitorIsland=document.getElementById("visitorIsland").value.trim();
const pass=document.getElementById("visitorPassword").value.trim();

if(!username||!visitorIsland||!pass){
alert("Fill all fields");
return;
}

socket.emit("joinQueue",{userId,username,visitorIsland});
document.getElementById("login").style.display="none";
document.getElementById("queue").style.display="block";
}

function leaveIsland(){
socket.emit("leaveQueue",userId);
location.reload();
}

socket.on("queueUpdate",data=>{
document.getElementById("visitorCountDisplay").innerText=
"Visitors: "+data.activeCount+"/7";

const user=data.users.find(u=>u.userId===userId);
if(!user) return;

document.getElementById("position").innerText="Position: "+user.position;

const percent=(data.activeCount/7)*100;
document.getElementById("progressBar").style.width=percent+"%";
document.getElementById("progressText").innerText=data.activeCount+"/7 Visitors";

if(user.active){
document.getElementById("status").innerText="You're on the island!";
document.getElementById("code").innerText="Dodo Code: "+user.dodoCodeDisplay;
}else{
document.getElementById("status").innerText="Waiting in queue...";
}
});
</script>

</body>
</html>